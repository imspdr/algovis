"use strict";(self.webpackChunknodejs=self.webpackChunknodejs||[]).push([[139],{2139:(t,i,e)=>{e.r(i),e.d(i,{default:()=>z});var s=e(2445),h=e(6540),r=e(7813);const a=30,n=(t,i,e,s,h,r)=>{const a=Math.abs(i-h),n=Math.abs(t-s);if(n<r){if(a<e+r)return!0}else if(a<r){if(n<e+r)return!0}else if(n+a<2*r+e)return!0;return!1},l=class{constructor(){this.setView=()=>{const t=document.getElementById("brick-frame");t&&(0,r.h5)((()=>{this.width=t.offsetWidth,this.height=t.offsetHeight}))},this.setHoleWidth=t=>{(0,r.h5)((()=>{this.holeWidth=t}))},this.setGravity=t=>{(0,r.h5)((()=>{this.gravity=-t}))},this.setUpperPower=t=>{(0,r.h5)((()=>{this.upperPower=t}))},this.setHorizontalPower=t=>{(0,r.h5)((()=>{this.horizontalPower=t}))},this.getViewY=t=>this.height/2-t+this.nowHeight,this.newWall=(t,i)=>{const e=6*this.radius+Math.random()*(this.width-12*this.radius),s=this.wallHeight+t*a*this.radius;return{y:s,hole:e,obs:i?[{x:e+(.5-Math.random())*(this.radius*(this.holeWidth+2)),y:s+6*this.radius+a*this.radius/6*Math.random()}]:[{x:e+(.5-Math.random())*(this.radius*(this.holeWidth+2)),y:s+6*this.radius+a*this.radius/6*Math.random()},{x:e+(.5-Math.random())*(this.radius*(this.holeWidth+2)),y:s-6*this.radius-a*this.radius/6*Math.random()}]}},this.initWall=()=>{(0,r.h5)((()=>{this.count=0,this.nowHeight=this.height/2,this.wallHeight=this.nowHeight+this.radius*a,this.activeWalls=[...Array(2)].map(((t,i)=>this.newWall(i,0==i)))}))},this.generateWall=()=>{(0,r.h5)((()=>{this.activeWalls=[...this.activeWalls.slice(-3),this.newWall(2)],this.wallHeight+=this.radius*a}))},this.initBrick=()=>{(0,r.h5)((()=>{this.brick={pos:{x:this.width/2,y:this.height/2},velocity:{x:0,y:0},accel:{x:0,y:this.gravity}}}))},this.left=()=>{(0,r.h5)((()=>{this.brick=Object.assign(Object.assign({},this.brick),{velocity:{y:this.upperPower,x:-this.horizontalPower}})}))},this.right=()=>{(0,r.h5)((()=>{this.brick=Object.assign(Object.assign({},this.brick),{velocity:{y:this.upperPower,x:this.horizontalPower}})}))},this.start=()=>{this.stopFlag&&(this.loseFlag&&this.reset(),(0,r.h5)((()=>{this.loseFlag=!1,this.stopFlag=!1;const t=i=>{let e=!0;this.lastTime||(this.lastTime=i);const s=i-this.lastTime;s>=this.timeInterval&&(e=this.unitAction(),this.lastTime=i-s%this.timeInterval),e?this.animationId=requestAnimationFrame(t):(this.loseFlag=!0,this.stop())};this.animationId=requestAnimationFrame(t)})))},this.stop=()=>{(0,r.h5)((()=>{this.stopFlag=!0,cancelAnimationFrame(this.animationId)}))},this.reset=()=>{this.animationId&&cancelAnimationFrame(this.animationId),this.setView(),this.initBrick(),this.initWall()},this.checkCrash=(t,i)=>{for(let e=0;e<this.activeWalls.length;e++){let s=this.activeWalls[e];if(s){if(Math.abs(s.y-i)>a*this.radius/2)continue;if(this.activeWalls[e].obs.reduce(((e,s)=>n(t,i,this.radius,s.x,s.y,this.radius)||e),!1))return!0;if(Math.abs(s.y-i)<2.5*this.radius){if(t>s.hole+this.holeWidth/2*this.radius||t<s.hole-this.holeWidth/2*this.radius)return!0;if(n(t,i,this.radius,s.hole+(this.holeWidth+3)/2*this.radius,s.y,1.5*this.radius)||n(t,i,this.radius,s.hole-(this.holeWidth+3)/2*this.radius,s.y,1.5*this.radius))return!0}return!1}}return!1},this.unitAction=()=>{let t=Math.max(this.radius,Math.min(this.brick.pos.x+this.brick.velocity.x,this.width-this.radius)),i=this.brick.pos.y+this.brick.velocity.y;return(0,r.h5)((()=>{i>this.nowHeight&&(this.nowHeight=i);let e=this.brick.velocity.x+this.brick.accel.x,s=this.brick.velocity.y+this.brick.accel.y;this.brick=Object.assign(Object.assign({},this.brick),{pos:{x:t,y:i},velocity:{x:e,y:s}}),i>this.wallHeight&&(this.generateWall(),this.count+=1)})),!(i-this.nowHeight<-this.height/2||this.checkCrash(t,i))},this.count=0,this.holeWidth=10,this.timeInterval=1e3/60,this.radius=10,this.height=100,this.width=100,this.activeWalls=[],this.wallHeight=0,this.nowHeight=0,this.brick={pos:{x:50,y:50},velocity:{x:0,y:0},accel:{x:0,y:.1}},this.loseFlag=!1,this.stopFlag=!0,this.createFlag=!1,this.gravity=-.3,this.upperPower=7,this.horizontalPower=1.2,(0,r.l_)(this)}},o=(0,h.createContext)(null),c=({children:t})=>{const i=(0,h.useMemo)((()=>new l),[]);return(0,s.FD)(o.Provider,{value:i,children:[" ",t," "]})},d=()=>{const t=(0,h.useContext)(o);if(null===t)throw Error("provider is null");return t};var u=e(7926),g=e(3159),w=e(4015),m=e(6387),p=e(3250),v={name:"5sg0uh",styles:"padding:0px 20px"};function y(){return(0,s.Y)("div",{css:v,children:(0,s.Y)(m.o,{remarkPlugins:[p.A],children:"# Amazing brick\n\n인기게임(?) Amazing brick 클론코딩\n\nrequestAnimationFrame을 이용한 부드러운 애니메이션 적용\n\n좌우 방향키로 조작할 수 있습니다\n"})})}var f={name:"w1atjl",styles:"width:100%;height:100%"},x={name:"jkqvw9",styles:"height:calc(100%);width:calc(100%);display:flex;flex-direction:column;align-items:center"};const b=(0,w.PA)((function(){const t=d();(0,h.useEffect)((()=>(t.reset(),window.addEventListener("keydown",i),window.addEventListener("resize",t.reset),()=>{window.removeEventListener("resize",t.reset),window.removeEventListener("keydown",i)})),[]);const i=i=>{"ArrowRight"===i.key?t.right():"ArrowLeft"===i.key?t.left():" "===i.key&&(t.stopFlag?t.start():t.stop())};return(0,s.Y)("div",{css:x,id:"brick-frame",children:(0,s.FD)("svg",{css:f,onClick:i=>{const e=i.currentTarget.getBoundingClientRect();(i.clientX-e.left)/e.width>.5?t.right():t.left()},children:[(0,s.Y)(s.FK,{children:t.activeWalls.map((i=>(0,s.FD)(s.FK,{children:[(0,s.Y)("rect",{x:"0",y:""+(t.getViewY(i.y)-1.5*t.radius),width:""+(i.hole-t.radius*t.holeWidth/2),height:""+3*t.radius,fill:"var(--highlight)"}),(0,s.Y)("rect",{x:`${i.hole+5*t.radius}`,y:""+(t.getViewY(i.y)-1.5*t.radius),width:""+(t.width-i.hole-t.radius*t.holeWidth/2),height:""+3*t.radius,fill:"var(--highlight)"}),i.obs.map((i=>(0,s.Y)("rect",{x:""+(i.x-t.radius),y:""+(t.getViewY(i.y)-t.radius),width:""+2*t.radius,height:""+2*t.radius,fill:"var(--highlight)"})))]})))}),(0,s.Y)("polygon",{points:`${t.brick.pos.x},${t.getViewY(t.brick.pos.y)-t.radius} ${t.brick.pos.x+t.radius},${t.getViewY(t.brick.pos.y)} ${t.brick.pos.x},${t.getViewY(t.brick.pos.y)+t.radius} ${t.brick.pos.x-t.radius},${t.getViewY(t.brick.pos.y)}`,fill:"var(--foreground)",stroke:"var(--foreground)","stroke-width":"2"}),(0,s.Y)("text",{x:t.width-50,y:50,fill:"var(--foreground)","font-size":"32",children:t.count})]})})}));var k=e(4073),W=e(9486),Y={name:"1lmu3jn",styles:"color:var(--highlight)"},F={name:"6nm4df",styles:"display:flex;flex-direction:column;width:calc(100% - 40px);align-items:center;padding:20px;gap:20px"},A={name:"jisjni",styles:"width:100%;display:flex;flex-direction:column;gap:10px;align-items:flex-start"};const P=(0,w.PA)((function(){const t=d(),i=A,e=[{desc:"중력",value:-t.gravity,setValue:t.setGravity,min:.01,max:.9,step:.01},{desc:"윗방향 힘",value:t.upperPower,setValue:t.setUpperPower,min:.1,max:20,step:.1},{desc:"가로방향 힘",value:t.horizontalPower,setValue:t.setHorizontalPower,min:.1,max:5,step:.1}];return(0,s.Y)("div",{css:F,children:e.map((t=>(0,s.FD)("div",{css:i,children:[(0,s.Y)(k.A,{variant:"h6",children:`${t.desc} : ${t.value}`},`${t.desc}-title`),(0,s.Y)(W.Ay,{"aria-label":"delay",value:t.value,step:t.step,min:t.min,max:t.max,marks:[{value:t.min,label:String(t.min)},{value:t.max,label:String(t.max)}],css:Y,onChange:(i,e)=>{t.setValue(e)}},`${t.desc}-slider`)]},`${t.desc}`)))})}));const H=(0,w.PA)((function(){const[t,i]=(0,h.useState)(window.innerWidth),[e,r]=(0,h.useState)(0),a=()=>{i(window.innerWidth)};(0,h.useEffect)((()=>(addEventListener("resize",a),()=>{removeEventListener("resize",a)})),[]),(0,h.useEffect)((()=>{n.reset()}),[e]);const n=d(),l=!n.stopFlag,o=()=>{return t=this,i=void 0,s=function*(){return n.start(),n.stopFlag},new((e=void 0)||(e=Promise))((function(h,r){function a(t){try{l(s.next(t))}catch(t){r(t)}}function n(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var i;t.done?h(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(a,n)}l((s=s.apply(t,i||[])).next())}));var t,i,e,s},c=()=>{n.stop()},w=()=>{n.reset()},m=(0,s.Y)(y,{}),p=(0,s.Y)(P,{}),v=(0,s.Y)(b,{});return(0,s.Y)(s.FK,{children:t>900?(0,s.Y)(u.A,{problem:m,controller:p,viewer:v,start:l,onStart:o,onStop:c,onRefresh:w,onWidthChange:t=>{r(t)}}):(0,s.Y)(g.A,{problem:m,controller:p,viewer:v,start:l,onStart:o,onStop:c,onRefresh:w})})}));function z(){return(0,s.Y)(c,{children:(0,s.Y)(H,{})})}}}]);