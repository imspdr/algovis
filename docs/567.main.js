"use strict";(self.webpackChunknodejs=self.webpackChunknodejs||[]).push([[567],{4567:(t,n,e)=>{e.r(n),e.d(n,{default:()=>T});var r=e(2445),i=e(6540),o=e(7813),s=e(8921),a=function(){return a=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},a.apply(this,arguments)},c=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},u=function(t,n,e){return"-"===e?{x:t.x-n.x,y:t.y-n.y}:"+"===e?{x:t.x+n.x,y:t.y+n.y}:t},l=function(t,n,e,r){if(function(t,n){var e=t.radius+n.radius;return!(Math.abs(t.pos.x-t.pos.x)>e+1||Math.abs(t.pos.y-t.pos.y)>e+1)&&c(u(t.pos,n.pos,"-"))<=e}(t,n)){if(t.radius===n.radius)return t.radius>20*h?{fruit1:a(a({},t),{pos:{x:(t.pos.x+n.pos.x)/2,y:(t.pos.y+n.pos.y)/2},radius:h,fillIndex:0}),fruit2:void 0}:{fruit1:a(a({},t),{pos:{x:(t.pos.x+n.pos.x)/2,y:(t.pos.y+n.pos.y)/2},radius:1.4*t.radius,fillIndex:t.fillIndex+1}),fruit2:void 0};var i=u(t.pos,n.pos,"-"),o=u(n.pos,t.pos,"-"),s=u(t.velocity,n.velocity,"-"),l=t.radius+n.radius+1,f=c(i),p=e*c(s),d=r,y={x:(t.velocity.x+p*i.x)*d,y:(t.velocity.y+p*i.y)*d},v={x:(n.velocity.x+p*o.x)*d,y:(n.velocity.y+p*o.y)*d};return{fruit1:a(a({},t),{velocity:y}),fruit2:a(a({},n),{pos:{x:t.pos.x+o.x*(l/f),y:t.pos.y+o.y*(l/f)},velocity:v})}}return{fruit1:t,fruit2:n}},f=function(){return f=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},f.apply(this,arguments)},p=function(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))},d=1e3,h=20;const y=function(){var t=this;this.setT=function(n){(0,o.h5)((function(){t.t=n}))},this.setEffect=function(n){(0,o.h5)((function(){t.effect=n}))},this.setGravity=function(n){(0,o.h5)((function(){t.gravity=n}))},this.setCollisionPower=function(n){(0,o.h5)((function(){t.collisionPower=n}))},this.setLossRate=function(n){(0,o.h5)((function(){t.lossRate=n}))},this.setPosX=function(n){(0,o.h5)((function(){n>d-t.nowRadius?t.posX=t.nowRadius:n<t.nowRadius?t.posX=d-t.nowRadius:t.posX=n}))},this.start=function(){t.loseFlag&&t.reset(),(0,o.h5)((function(){t.loseFlag=!1,t.stopFlag=!1})),t.interval=setInterval((function(){t.unitAction(),(0,o.h5)((function(){t.renderFruits=t.fruits}))}),20)},this.stop=function(){(0,o.h5)((function(){t.stopFlag=!0,t.interval&&clearInterval(t.interval)}))},this.reset=function(){(0,o.h5)((function(){t.fruits=[],t.renderFruits=[]}))},this.addFruit=function(){return n=t,e=void 0,i=function(){var t=this;return function(t,n){var e,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(e=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(t,o)}catch(t){a=[6,t],r=0}finally{e=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(n){switch(n.label){case 0:return this.loseFlag&&this.start(),this.createFlag||this.stopFlag?[2]:((0,o.h5)((function(){t.createFlag=!0,t.fruits=p(p([],t.fruits,!0),[{radius:t.nowRadius,pos:{x:t.posX,y:2*t.nowRadius},velocity:{x:0,y:5},accel:{x:0,y:t.gravity},fillIndex:t.nowFill}],!1);var n=Math.random();n<.4?(t.nowRadius=1.4*h,t.nowFill=1,t.setPosX(t.posX+10)):n<.8?(t.nowRadius=h,t.nowFill=0):(t.nowRadius=1.4*h*1.4,t.nowFill=2,t.setPosX(t.posX-10))})),[4,(0,s.y)(500)]);case 1:return n.sent(),(0,o.h5)((function(){t.createFlag=!1})),[2]}}))},new((r=void 0)||(r=Promise))((function(t,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((i=i.apply(n,e||[])).next())}));var n,e,r,i},this.unitAction=function(){(0,o.h5)((function(){t.fruits=t.fruits.filter((function(t){return t}));for(var n=0;n<t.t;n++)for(var e=function(n){var e=t.fruits[n];if(!e)return"continue";var r=e.pos.x+e.velocity.x/t.t,i=e.pos.y+e.velocity.y/t.t,o=e.velocity.x+e.accel.x/t.t,s=e.velocity.y+e.accel.y/t.t;i>1600-e.radius&&(i=1600-e.radius,s=-t.lossRate*s),i<e.radius&&(t.loseFlag=!0,t.stop(),s=0),r>d-e.radius&&(r=d-e.radius,o=-t.lossRate*o),r<e.radius&&(r=e.radius,o=-t.lossRate*o),Math.abs(o)<.1&&(o=0),Math.abs(s)<.1&&(s=0),t.fruits=t.fruits.map((function(t,e){return e===n&&t?f(f({},t),{velocity:{x:o,y:s},pos:{x:r,y:i}}):t}));for(var a=0;a<t.effect;a++)for(var c=function(e){if(!t.fruits[n]||!t.fruits[e]||e==n)return"continue";var r=l(t.fruits[n],t.fruits[e],t.collisionPower,t.lossRate/2e3);t.fruits=t.fruits.map((function(t,i){return i===n?r.fruit1:i===e?r.fruit2:t}))},u=0;u<t.fruits.length;u++)c(u)},r=0;r<t.fruits.length;r++)e(r)}))},this.t=3,this.effect=2,this.fruits=[],this.renderFruits=[],this.interval=void 0,this.loseFlag=!1,this.stopFlag=!0,this.createFlag=!1,this.gravity=5,this.collisionPower=20,this.lossRate=.1,this.posX=500,this.nowRadius=h,this.nowFill=0,(0,o.l_)(this)};var v,x=(0,i.createContext)(null),w=function(t){var n=t.children,e=(0,i.useMemo)((function(){return new y}),[]);return(0,r.FD)(x.Provider,{value:e,children:[" ",n," "]})},g=function(){var t=(0,i.useContext)(x);if(null===t)throw Error("provider is null");return t},b=e(7926),m=e(3159),F=e(4015),P=e(7437),R=e(6387),k=e(3250);function A(){return(0,r.Y)("div",{css:(0,P.AH)(v||(t=["\n        padding: 0px 20px;\n      "],n=["\n        padding: 0px 20px;\n      "],Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,v=t)),children:(0,r.Y)(R.o,{remarkPlugins:[k.A],children:"# 수박 게임\n\n물리엔진을 직접 구현해서 만든 수박게임\n\n같은 크기의 원이 부딪히면 약 두 배 크기의 원으로 합쳐집니다.\n\n모바일 : 화면을 클릭하여 떨어뜨리기\n\nPC : 화면 클릭 혹은 좌우 화살표로 조작 d버튼으로 떨어뜨리기\n\n중력, 충돌 강도, 탄성 조절 가능\n"})});var t,n}var X=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t};const Y=(0,F.PA)((function(){var t=g(),n=function(n){"ArrowRight"===n.key?t.setPosX(t.posX+20):"ArrowLeft"===n.key?t.setPosX(t.posX-20):"d"===n.key?t.addFruit():"r"===n.key&&t.reset()},e=["#94d6c5","#3a987f","#d694c6","#c15da9","#ffd700","#645047","#ff8c00","#e65100","#01579b","#c62828"];return(0,i.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[]),(0,r.Y)("div",{css:(0,P.AH)(j||(j=X(["\n        width: 100%;\n        height: 100%;\n      "],["\n        width: 100%;\n        height: 100%;\n      "]))),children:(0,r.Y)("div",{css:(0,P.AH)(O||(O=X(["\n          height: calc(100% - 10px);\n          aspect-ratio: 1 / 1.6;\n          border: 1px solid;\n        "],["\n          height: calc(100% - 10px);\n          aspect-ratio: 1 / 1.6;\n          border: 1px solid;\n        "]))),children:(0,r.FD)("svg",{viewBox:"0 0 1000 1600",onClick:function(n){var e=n.currentTarget.getBoundingClientRect(),r=(n.clientX-e.left)/e.width*1e3;t.setPosX(r),t.addFruit()},children:[(0,r.Y)("circle",{cx:t.posX,cy:0,r:t.nowRadius,fill:e[t.nowFill]},"new-fruit"),t.renderFruits.map((function(t,n){return t?(0,r.Y)("circle",{cx:t.pos.x,cy:t.pos.y,r:t.radius,fill:e[t.fillIndex>=e.length?0:t.fillIndex]},"fruit-".concat(n)):void 0}))]})})})}));var j,O,I=e(4073),S=e(9486),C=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t};const E=(0,F.PA)((function(){var t=g(),n=(0,P.AH)(M||(M=C(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    align-items: flex-start;\n  "],["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    align-items: flex-start;\n  "]))),e=[{desc:"중력",value:t.gravity,setValue:t.setGravity,min:1,max:9,step:1},{desc:"충돌 세기",value:t.collisionPower,setValue:t.setCollisionPower,min:10,max:90,step:10},{desc:"탄성",value:t.lossRate,setValue:t.setLossRate,min:.1,max:.9,step:.1},{desc:"프레임 당 계산 횟수",value:t.t,setValue:t.setT,min:1,max:9,step:1},{desc:"충돌 시 부수 효과 계산 횟수",value:t.effect,setValue:t.setEffect,min:1,max:5,step:1}];return(0,r.Y)("div",{css:(0,P.AH)(H||(H=C(["\n        display: flex;\n        flex-direction: column;\n        width: calc(100% - 40px);\n        align-items: center;\n        padding: 20px;\n        gap: 20px;\n      "],["\n        display: flex;\n        flex-direction: column;\n        width: calc(100% - 40px);\n        align-items: center;\n        padding: 20px;\n        gap: 20px;\n      "]))),children:e.map((function(t){return(0,r.FD)("div",{css:n,children:[(0,r.Y)(I.A,{variant:"h6",children:"".concat(t.desc," : ").concat(t.value)},"".concat(t.desc,"-title")),(0,r.Y)(S.Ay,{"aria-label":"delay",value:t.value,step:t.step,min:t.min,max:t.max,marks:[{value:t.min,label:String(t.min)},{value:t.max,label:String(t.max)}],css:(0,P.AH)(L||(L=C(["\n                color: var(--highlight);\n              "],["\n                color: var(--highlight);\n              "]))),onChange:function(n,e){t.setValue(e)}},"".concat(t.desc,"-slider"))]},"".concat(t.desc))}))})}));var M,H,L;const V=(0,F.PA)((function(){var t=this,n=(0,i.useState)(window.innerWidth),e=n[0],o=n[1];(0,i.useEffect)((function(){addEventListener("resize",(function(){o(window.innerWidth)}))}),[]);var s=g(),a=function(){return n=t,e=void 0,i=function(){return function(t,n){var e,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(e=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(t,o)}catch(t){a=[6,t],r=0}finally{e=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(t){return s.start(),[2,s.stopFlag]}))},new((r=void 0)||(r=Promise))((function(t,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((i=i.apply(n,e||[])).next())}));var n,e,r,i},c=function(){s.stop()},u=function(){s.reset()},l=(0,r.Y)(A,{}),f=(0,r.Y)(E,{}),p=(0,r.Y)(Y,{});return(0,r.Y)(r.FK,{children:e>900?(0,r.Y)(b.A,{problem:l,controller:f,viewer:p,onStart:a,onStop:c,onRefresh:u}):(0,r.Y)(m.A,{problem:l,controller:f,viewer:p,onStart:a,onStop:c,onRefresh:u})})}));function T(){return(0,r.Y)(w,{children:(0,r.Y)(V,{})})}}}]);