"use strict";(self.webpackChunknodejs=self.webpackChunknodejs||[]).push([[819],{7819:(t,s,i)=>{i.r(s),i.d(s,{default:()=>I});var e=i(2445),n=i(6540),r=i(7813),o=i(8921);const a=t=>Math.sqrt(t.x*t.x+t.y*t.y),l=(t,s,i)=>"-"===i?{x:t.x-s.x,y:t.y-s.y}:"+"===i?{x:t.x+s.x,y:t.y+s.y}:t,h=(t,s,i,e)=>{if(((t,s)=>{const i=t.radius+s.radius;return!(Math.abs(t.pos.x-t.pos.x)>i+1||Math.abs(t.pos.y-t.pos.y)>i+1)&&a(l(t.pos,s.pos,"-"))<=i})(t,s)){if(t.radius===s.radius)return t.radius>20*u?{fruit1:Object.assign(Object.assign({},t),{pos:{x:(t.pos.x+s.pos.x)/2,y:(t.pos.y+s.pos.y)/2},radius:u,fillIndex:0}),fruit2:void 0}:{fruit1:Object.assign(Object.assign({},t),{pos:{x:(t.pos.x+s.pos.x)/2,y:(t.pos.y+s.pos.y)/2},radius:1.4*t.radius,fillIndex:t.fillIndex+1}),fruit2:void 0};const n=l(t.pos,s.pos,"-"),r=l(s.pos,t.pos,"-"),o=l(t.velocity,s.velocity,"-"),h=t.radius+s.radius+1,c=a(n),d=i*a(o),f=e,p={x:(t.velocity.x+d*n.x)*f,y:(t.velocity.y+d*n.y)*f},y={x:(s.velocity.x+d*r.x)*f,y:(s.velocity.y+d*r.y)*f};return{fruit1:Object.assign(Object.assign({},t),{velocity:p}),fruit2:Object.assign(Object.assign({},s),{pos:{x:t.pos.x+r.x*(h/c),y:t.pos.y+r.y*(h/c)},velocity:y})}}return{fruit1:t,fruit2:s}};const c=1e3,u=20,d=class{constructor(){this.setT=t=>{(0,r.h5)((()=>{this.t=t}))},this.setEffect=t=>{(0,r.h5)((()=>{this.effect=t}))},this.setGravity=t=>{(0,r.h5)((()=>{this.gravity=t}))},this.setCollisionPower=t=>{(0,r.h5)((()=>{this.collisionPower=t}))},this.setLossRate=t=>{(0,r.h5)((()=>{this.lossRate=t}))},this.setPosX=t=>{(0,r.h5)((()=>{t>c-this.nowRadius?this.posX=c-this.nowRadius:t<this.nowRadius?this.posX=this.nowRadius:this.posX=t}))},this.start=()=>{this.loseFlag&&this.reset(),(0,r.h5)((()=>{this.loseFlag=!1,this.stopFlag=!1})),this.interval=setInterval((()=>{this.unitAction(),(0,r.h5)((()=>{this.renderFruits=this.fruits}))}),20)},this.stop=()=>{(0,r.h5)((()=>{this.stopFlag=!0,this.interval&&clearInterval(this.interval)}))},this.reset=()=>{(0,r.h5)((()=>{this.fruits=[],this.renderFruits=[]}))},this.addFruit=()=>{return t=this,s=void 0,e=function*(){this.loseFlag&&this.start(),this.createFlag||this.stopFlag||((0,r.h5)((()=>{this.createFlag=!0,this.fruits=[...this.fruits,{radius:this.nowRadius,pos:{x:this.posX,y:2*this.nowRadius},velocity:{x:0,y:5},accel:{x:0,y:this.gravity},fillIndex:this.nowFill}];const t=Math.random();t<.4?(this.nowRadius=1.4*u,this.nowFill=1,this.setPosX(this.posX+10)):t<.8?(this.nowRadius=u,this.nowFill=0):(this.nowRadius=1.4*u*1.4,this.nowFill=2,this.setPosX(this.posX-10))})),yield(0,o.y)(500),(0,r.h5)((()=>{this.createFlag=!1})))},new((i=void 0)||(i=Promise))((function(n,r){function o(t){try{l(e.next(t))}catch(t){r(t)}}function a(t){try{l(e.throw(t))}catch(t){r(t)}}function l(t){var s;t.done?n(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,a)}l((e=e.apply(t,s||[])).next())}));var t,s,i,e},this.unitAction=()=>{(0,r.h5)((()=>{this.fruits=this.fruits.filter((t=>t));for(let t=0;t<this.t;t++)for(let t=0;t<this.fruits.length;t++){let s=this.fruits[t];if(!s)continue;let i=s.pos.x+s.velocity.x/this.t,e=s.pos.y+s.velocity.y/this.t,n=s.velocity.x+s.accel.x/this.t,r=s.velocity.y+s.accel.y/this.t;e>1600-s.radius&&(e=1600-s.radius,r=-this.lossRate*r),e<s.radius&&(this.loseFlag=!0,this.stop(),r=0),i>c-s.radius&&(i=c-s.radius,n=-this.lossRate*n),i<s.radius&&(i=s.radius,n=-this.lossRate*n),Math.abs(n)<.1&&(n=0),Math.abs(r)<.1&&(r=0),this.fruits=this.fruits.map(((s,o)=>o===t&&s?Object.assign(Object.assign({},s),{velocity:{x:n,y:r},pos:{x:i,y:e}}):s));for(let s=0;s<this.effect;s++)for(let s=0;s<this.fruits.length;s++){if(!this.fruits[t]||!this.fruits[s]||s==t)continue;let i=h(this.fruits[t],this.fruits[s],this.collisionPower,this.lossRate/2e3);this.fruits=this.fruits.map(((e,n)=>n===t?i.fruit1:n===s?i.fruit2:e))}}}))},this.t=3,this.effect=2,this.fruits=[],this.renderFruits=[],this.interval=void 0,this.loseFlag=!1,this.stopFlag=!0,this.createFlag=!1,this.gravity=5,this.collisionPower=20,this.lossRate=.1,this.posX=500,this.nowRadius=u,this.nowFill=0,(0,r.l_)(this)}},f=(0,n.createContext)(null),p=({children:t})=>{const s=(0,n.useMemo)((()=>new d),[]);return(0,e.FD)(f.Provider,{value:s,children:[" ",t," "]})},y=()=>{const t=(0,n.useContext)(f);if(null===t)throw Error("provider is null");return t};var x=i(7926),v=i(3159),g=i(4015),w=i(6387),m=i(3250),F={name:"5sg0uh",styles:"padding:0px 20px"};function b(){return(0,e.Y)("div",{css:F,children:(0,e.Y)(w.o,{remarkPlugins:[m.A],children:"# 수박 게임\n\n물리엔진을 직접 구현해서 만든 수박게임\n\n같은 크기의 원이 부딪히면 약 두 배 크기의 원으로 합쳐집니다.\n\n모바일 : 화면을 클릭하여 떨어뜨리기\n\nPC : 화면 클릭 혹은 좌우 화살표로 조작 d버튼으로 떨어뜨리기\n\n중력, 충돌 강도, 탄성 조절 가능\n"})})}var R={name:"6pbkkm",styles:"height:calc(100% - 10px);aspect-ratio:1/1.6;border:1px solid"},P={name:"1om0608",styles:"padding:10px;height:calc(100% - 20px);width:calc(100% - 20px);display:flex;flex-direction:column;align-items:center"};const X=(0,g.PA)((function(){const t=y(),s=s=>{"ArrowRight"===s.key?t.setPosX(t.posX+20):"ArrowLeft"===s.key?t.setPosX(t.posX-20):"d"===s.key?t.addFruit():"r"===s.key&&t.reset()},i=["#94d6c5","#3a987f","#d694c6","#c15da9","#ffd700","#645047","#ff8c00","#e65100","#01579b","#c62828"];return(0,n.useEffect)((()=>(addEventListener("keydown",s),()=>{removeEventListener("keydown",s)})),[]),(0,e.Y)("div",{css:P,children:(0,e.Y)("div",{css:R,children:(0,e.FD)("svg",{viewBox:"0 0 1000 1600",onClick:s=>{const i=s.currentTarget.getBoundingClientRect(),e=(s.clientX-i.left)/i.width*1e3;t.setPosX(e),t.addFruit()},children:[(0,e.Y)("circle",{cx:t.posX,cy:0,r:t.nowRadius,fill:i[t.nowFill]},"new-fruit"),t.renderFruits.map(((t,s)=>t?(0,e.Y)("circle",{cx:t.pos.x,cy:t.pos.y,r:t.radius,fill:i[t.fillIndex>=i.length?0:t.fillIndex]},`fruit-${s}`):void 0))]})})})}));var Y=i(4073),j=i(9486),k={name:"1lmu3jn",styles:"color:var(--highlight)"},A={name:"6nm4df",styles:"display:flex;flex-direction:column;width:calc(100% - 40px);align-items:center;padding:20px;gap:20px"},C={name:"jisjni",styles:"width:100%;display:flex;flex-direction:column;gap:10px;align-items:flex-start"};const O=(0,g.PA)((function(){const t=y(),s=C,i=[{desc:"중력",value:t.gravity,setValue:t.setGravity,min:1,max:9,step:1},{desc:"충돌 세기",value:t.collisionPower,setValue:t.setCollisionPower,min:10,max:90,step:10},{desc:"탄성",value:t.lossRate,setValue:t.setLossRate,min:.1,max:.9,step:.1},{desc:"프레임 당 계산 횟수",value:t.t,setValue:t.setT,min:1,max:9,step:1},{desc:"충돌 시 부수 효과 계산 횟수",value:t.effect,setValue:t.setEffect,min:1,max:5,step:1}];return(0,e.Y)("div",{css:A,children:i.map((t=>(0,e.FD)("div",{css:s,children:[(0,e.Y)(Y.A,{variant:"h6",children:`${t.desc} : ${t.value}`},`${t.desc}-title`),(0,e.Y)(j.Ay,{"aria-label":"delay",value:t.value,step:t.step,min:t.min,max:t.max,marks:[{value:t.min,label:String(t.min)},{value:t.max,label:String(t.max)}],css:k,onChange:(s,i)=>{t.setValue(i)}},`${t.desc}-slider`)]},`${t.desc}`)))})}));const E=(0,g.PA)((function(){const[t,s]=(0,n.useState)(window.innerWidth),i=()=>{s(window.innerWidth)};(0,n.useEffect)((()=>(addEventListener("resize",i),()=>{removeEventListener("resize",i)})),[]);const r=y(),o=!r.stopFlag,a=()=>{return t=this,s=void 0,e=function*(){return r.start(),r.stopFlag},new((i=void 0)||(i=Promise))((function(n,r){function o(t){try{l(e.next(t))}catch(t){r(t)}}function a(t){try{l(e.throw(t))}catch(t){r(t)}}function l(t){var s;t.done?n(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,a)}l((e=e.apply(t,s||[])).next())}));var t,s,i,e},l=()=>{r.stop()},h=()=>{r.reset()},c=(0,e.Y)(b,{}),u=(0,e.Y)(O,{}),d=(0,e.Y)(X,{});return(0,e.Y)(e.FK,{children:t>900?(0,e.Y)(x.A,{problem:c,controller:u,viewer:d,start:o,onStart:a,onStop:l,onRefresh:h}):(0,e.Y)(v.A,{problem:c,controller:u,viewer:d,start:o,onStart:a,onStop:l,onRefresh:h})})}));function I(){return(0,e.Y)(p,{children:(0,e.Y)(E,{})})}}}]);